<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split-LAMP Primer Design Tool</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Split-LAMP Primer Design Tool</h1>
            <p>Design primers for microRNA detection using Split-LAMP technology</p>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="input">Input Sequence</div>
            <div class="tab" data-tab="output">Primer Output</div>
            <div class="tab" data-tab="customize">Customize Primers</div>
        </div>

        <div class="content">
            <!-- Input Tab -->
            <div class="tab-content active" id="input">
                <!-- Architecture Selector -->
                <div class="architecture-selector">
                    <h3>Split-LAMP Architecture</h3>
                    <p class="help-text" style="margin-bottom: 15px;">Select how your microRNA(s) will be used in the Split-LAMP design</p>
                    <div class="architecture-options">
                        <div class="architecture-option selected" onclick="selectArchitecture('f2-only')">
                            <label>
                                <input type="radio" name="architecture" value="f2-only" checked>
                                F2 Only
                            </label>
                            <div class="architecture-description">One microRNA as F2 primer, algorithm generates B2</div>
                        </div>
                        <div class="architecture-option" onclick="selectArchitecture('b2-only')">
                            <label>
                                <input type="radio" name="architecture" value="b2-only">
                                B2 Only
                            </label>
                            <div class="architecture-description">One microRNA as B2 primer, algorithm generates F2</div>
                        </div>
                        <div class="architecture-option" onclick="selectArchitecture('f2-and-b2')">
                            <label>
                                <input type="radio" name="architecture" value="f2-and-b2">
                                F2 and B2 (AND-gate)
                            </label>
                            <div class="architecture-description">Two microRNAs (F2 and B2) for dual detection</div>
                        </div>
                    </div>
                </div>

                <!-- First microRNA -->
                <div class="form-group">
                    <label for="mirna1-name">First microRNA Name</label>
                    <input type="text" id="mirna1-name" placeholder="e.g., miR-21, miR-34a">
                    <p class="help-text">Enter the name of your target microRNA</p>
                </div>

                <div class="form-group">
                    <label for="mirna1-sequence">First microRNA Sequence</label>
                    <input type="text" id="mirna1-sequence" placeholder="Enter first target microRNA sequence" oninput="parseAndValidateSequence('mirna1')">
                    <p class="help-text">Paste your target sequence in FASTA format or the plain sequence.</p>
                    <div class="validation-error" id="mirna1-error"></div>
                    <div class="sequence-info" id="mirna1-info">
                        <span class="sequence-info-item">
                            <span class="sequence-info-label">Length:</span>
                            <span class="sequence-info-value" id="mirna1-length">--</span> nt
                        </span>
                        <span class="sequence-info-item">
                            <span class="sequence-info-label">GC Content:</span>
                            <span class="sequence-info-value" id="mirna1-gc">--%</span>
                        </span>
                    </div>
                </div>

                <!-- Second microRNA (shown only for F2-and-B2 architecture) -->
                <div class="mirna2-section" id="mirna2-section">
                    <div class="form-group">
                        <label for="mirna2-name">Second microRNA Name</label>
                        <input type="text" id="mirna2-name" placeholder="e.g., miR-34a">
                        <p class="help-text">Enter the name of your second target microRNA</p>
                    </div>

                    <div class="form-group">
                        <label for="mirna2-sequence">Second microRNA Sequence</label>
                        <input type="text" id="mirna2-sequence" placeholder="Enter second target microRNA sequence" oninput="parseAndValidateSequence('mirna2')">
                        <p class="help-text">Paste your second target sequence in FASTA format or the plain sequence.</p>
                        <div class="validation-error" id="mirna2-error"></div>
                        <div class="sequence-info" id="mirna2-info">
                            <span class="sequence-info-item">
                                <span class="sequence-info-label">Length:</span>
                                <span class="sequence-info-value" id="mirna2-length">--</span> nt
                            </span>
                            <span class="sequence-info-item">
                                <span class="sequence-info-label">GC Content:</span>
                                <span class="sequence-info-value" id="mirna2-gc">--%</span>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="advanced-options">
                    <h3>Design Options</h3>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="generate-loop" checked>
                            <label for="generate-loop">Generate loop primers (LF, LB)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="optimize-specificity" checked>
                            <label for="optimize-specificity">Optimize for specificity</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="check-hairpins" checked>
                            <label for="check-hairpins">Check for hairpin structures</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="calculate-dg" checked>
                            <label for="calculate-dg">Calculate ΔG values</label>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="generatePrimers()">Generate Primers</button>
                    <button class="btn btn-secondary" onclick="clearForm()">Clear</button>
                </div>
            </div>

            <!-- Output Tab -->
            <div class="tab-content" id="output">
                <div class="state-container">
                    <!-- Idle State -->
                    <div id="idle-state">
                        <h3>No primers generated yet</h3>
                        <p>Go to the Input Sequence tab to generate primers</p>
                    </div>

                    <!-- Loading State -->
                    <div id="loading-state">
                        <div class="spinner"></div>
                        <div class="loading-text">Generating primers...</div>
                    </div>

                    <!-- Results State -->
                    <div id="results-state">
                        <div class="target-info">
                            <strong>Architecture:</strong> <span id="result-architecture">--</span><br>
                            <strong>Target 1:</strong> <span id="result-target1-name">--</span><br>
                            <span id="result-target2-info" style="display: none;">
                                <strong>Target 2:</strong> <span id="result-target2-name">--</span>
                            </span>
                        </div>

                        <div class="results-header">
                            <h2>Primer Design Results</h2>
                        </div>

                        <div class="primer-set">
                            <!-- Template Ultramer -->
                            <div class="primer-category">
                                <h3>Template Ultramer</h3>
                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">Template Ultramer (double loop structure)</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('template-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="template-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="template-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="template-gc">--%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Loop Primers -->
                            <div class="primer-category">
                                <h3>Loop Primers</h3>
                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">LF (Loop Forward)</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('lf-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="lf-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="lf-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="lf-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="lf-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="lf-dg">-- kcal/mol</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Hairpins</div>
                                            <div class="stat-value" id="lf-hairpin">--</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">LB (Loop Backward)</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('lb-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="lb-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="lb-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="lb-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="lb-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="lb-dg">-- kcal/mol</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Hairpins</div>
                                            <div class="stat-value" id="lb-hairpin">--</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Inner Primers -->
                            <div class="primer-category">
                                <h3>Inner Primers</h3>
                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">FIP (Forward Inner Primer)</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('fip-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="fip-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="fip-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="fip-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="fip-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="fip-dg">-- kcal/mol</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Hairpins</div>
                                            <div class="stat-value" id="fip-hairpin">--</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">BIP (Backward Inner Primer)</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('bip-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="bip-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="bip-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="bip-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="bip-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="bip-dg">-- kcal/mol</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Hairpins</div>
                                            <div class="stat-value" id="bip-hairpin">--</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Primer Components -->
                            <div class="primer-category">
                                <h3>Primer Components (Split Primers)</h3>
                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">F2</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('f2-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="f2-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="f2-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="f2-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="f2-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="f2-dg">-- kcal/mol</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">B2</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('b2-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="b2-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="b2-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="b2-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="b2-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="b2-dg">-- kcal/mol</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">F1C</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('f1c-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="f1c-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="f1c-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="f1c-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="f1c-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="f1c-dg">-- kcal/mol</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="primer-item">
                                    <div class="primer-header">
                                        <span class="primer-name">B1C</span>
                                        <div class="primer-controls">
                                            <button class="btn-copy" onclick="copySequence('b1c-seq')" disabled>Copy</button>
                                        </div>
                                    </div>
                                    <div class="primer-sequence" id="b1c-seq" data-sequence="">Algorithm will generate this</div>
                                    <div class="primer-stats">
                                        <div class="stat-item">
                                            <div class="stat-label">Length</div>
                                            <div class="stat-value" id="b1c-len">-- bp</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">GC Content</div>
                                            <div class="stat-value" id="b1c-gc">--%</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">Tm</div>
                                            <div class="stat-value" id="b1c-tm">--°C</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-label">ΔG</div>
                                            <div class="stat-value" id="b1c-dg">-- kcal/mol</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customize Tab -->
            <div class="tab-content" id="customize">
                <div class="editor-panel">
                    <h4>Adjust Primer Parameters</h4>
                    <p class="help-text">Fine-tune your primers by adjusting these parameters. Changes will update all dependent primers automatically.</p>

                    <div class="form-group" style="margin-top: 20px;">
                        <label for="edit-mirna1">First microRNA Sequence</label>
                        <textarea id="edit-mirna1" placeholder="Modify your first microRNA sequence here"></textarea>
                    </div>

                    <div class="form-group" id="edit-mirna2-group" style="display: none;">
                        <label for="edit-mirna2">Second microRNA Sequence</label>
                        <textarea id="edit-mirna2" placeholder="Modify your second microRNA sequence here"></textarea>
                    </div>

                    <button class="btn btn-primary" style="margin-top: 10px;" onclick="updatePrimers()">Update All Primers</button>

                    <div class="slider-group" style="margin-top: 30px;">
                        <label>Target GC Content: <span class="slider-value" id="gc-value">50%</span></label>
                        <input type="range" id="gc-slider" min="40" max="60" value="50" oninput="updateGCValue(this.value)">
                        <p class="help-text">Optimal range: 40-60%</p>
                    </div>

                    <div class="slider-group">
                        <label>Target Melting Temperature: <span class="slider-value" id="tm-value">60°C</span></label>
                        <input type="range" id="tm-slider" min="55" max="65" value="60" oninput="updateTmValue(this.value)">
                        <p class="help-text">Optimal range: 58-62°C for Split-LAMP</p>
                    </div>

                    <div class="slider-group">
                        <label>Primer Length Adjustment: <span class="slider-value" id="length-value">±0 bp</span></label>
                        <input type="range" id="length-slider" min="-5" max="5" value="0" oninput="updateLengthValue(this.value)">
                        <p class="help-text">Adjust primer length to optimize binding</p>
                    </div>

                    <div class="checkbox-group" style="margin-top: 20px;">
                        <div class="checkbox-item">
                            <input type="checkbox" id="auto-fix-hairpins" checked>
                            <label for="auto-fix-hairpins">Automatically fix hairpin structures</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="show-warnings" checked>
                            <label for="show-warnings">Show parameter warnings</label>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-primary" onclick="applyCustomizations()">Apply Changes</button>
                        <button class="btn btn-secondary" onclick="resetToDefault()">Reset to Default</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>